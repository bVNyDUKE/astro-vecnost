---
import img from "../images/vecna-logo-solo-100.png";
import { Image } from "@astrojs/image/components";
---

<nav
  class="sticky top-0 z-50 mb-10 border-b bg-white sm:relative sm:z-0 sm:block sm:border-0 sm:bg-none"
>
  <div class="hidden bg-white drop-shadow-md sm:block">
    <div class="container mx-auto items-center justify-between py-1.5 sm:flex">
      <a href="/">
        <div class="flex items-center justify-center">
          <Image
            src={img}
            alt="Vecnost logo"
            class="hover:pointer object-contain"
            width={65}
            height={65}
          />
          <div
            class="text-2xl font-semibold sm:text-2xl"
            style={{ lineHeight: "0.85" }}
          >
            Baza <br /> Podataka
          </div>
        </div>
      </a>
      <div
        class="flex basis-96 items-center justify-between space-x-2 text-xl font-semibold"
      >
        <a href="/pretraga">Pretraga</a>
        <a href="/statistika">Statistika</a>
        <a href="/indeks">Indeks</a>
        <a href="/mapa">Mapa</a>
      </div>
    </div>
  </div>
  <div class="p-4 px-8 text-gray-500 sm:hidden">
    <div class="flex items-center justify-between">
      <a href="/" class="flex items-center gap-1">
        <Image
          src={img}
          alt="Vecnost logo"
          class="hover:pointer object-contain"
          width={40}
          height={40}
        />
      </a>
      <div id="navBtn" data-open="false" class="cursor-pointer space-y-2">
        {
          Array.from({ length: 3 }).map(() => (
            <div class="h-0.5 w-8 bg-secondary-dark transition duration-500 ease-out" />
          ))
        }
      </div>
    </div>
    <div
      id="navMenu"
      class="fixed left-0 top-[73px] h-screen w-screen translate-x-full overflow-hidden bg-white p-12 transition duration-500 ease-out"
    >
      <a class="block p-4 font-semibold uppercase" href="/">Poƒçetna</a>
      <a class="block p-4 font-semibold uppercase" href="/pretraga">Pretraga</a>
      <a class="block p-4 font-semibold uppercase" href="/statistika"
        >Statistika</a
      >
      <a class="block p-4 font-semibold uppercase" href="/indeks">Indeks</a>
      <a class="block p-4 font-semibold uppercase" href="/mapa">Mapa</a>
    </div>
  </div>
</nav>

<script lang="js">
  const navBtn = document.querySelector("#navBtn");
  const navMenu = document.querySelector("#navMenu");
  const first = navBtn.querySelector("div:nth-of-type(1)");
  const second = navBtn.querySelector("div:nth-of-type(2)");
  const third = navBtn.querySelector("div:nth-of-type(3)");

  navBtn.addEventListener("click", () => {
    const navVal = navBtn.getAttribute("data-open");

    if (navVal == "false") {
      navBtn.setAttribute("data-open", "true");
      document.body.style.overflow = "hidden";

      first.classList.add("translate-y-[10px]", "rotate-45");
      second.classList.add("invisible");
      third.classList.add("translate-y-[-10px]", "rotate-[-45deg]");

      navMenu.classList.remove("translate-x-full");
    } else {
      navBtn.setAttribute("data-open", "false");
      document.body.removeAttribute("style");

      first.classList.remove("translate-y-[10px]", "rotate-45");
      second.classList.remove("invisible");
      third.classList.remove("translate-y-[-10px]", "rotate-[-45deg]");

      navMenu.classList.add("translate-x-full");
    }
  });
</script>
